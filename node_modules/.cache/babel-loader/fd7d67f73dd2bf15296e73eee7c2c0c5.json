{"ast":null,"code":"var _jsxFileName = \"E:\\\\book_shelf_application\\\\src\\\\components\\\\form.js\";\nimport React, { setGlobal } from 'reactn';\nimport { post } from '../util/service';\n\nclass AppForm extends React.Component {\n  constructor() {\n    super();\n\n    this.handleChange = (e, name) => {\n      let data = { ...this.state.data\n      };\n      data[name] = e.target.value;\n      this.validateInput(e, name);\n      this.setState({\n        data\n      });\n    };\n\n    this.validateInput = (e, name) => {\n      let validation = { ...this.state.validation\n      };\n      let value = e.target.value;\n\n      switch (name) {\n        case 'book_name':\n          if (value === '') {\n            validation[name] = 'Please enter book name';\n          } else {\n            validation[name] = '';\n          }\n\n          break;\n\n        case 'author':\n          if (value === '') {\n            validation[name] = 'Please enter author name';\n          } else {\n            validation[name] = '';\n          }\n\n          break;\n\n        default:\n          break;\n      }\n\n      this.setState({\n        validation\n      });\n    };\n\n    this.submitForm = e => {\n      e.preventDefault();\n      const data = { ...this.state.data\n      };\n      this.setState({\n        loading: true\n      });\n      post('/books', data).then(res => {\n        this.setState({\n          loading: false\n        }); // console.log(res)\n\n        if (res.status === 201) {\n          if (res.data.status === 'success') {\n            // console.log(res.data.output)\n            let books = [...this.global.books];\n            books.unshift(data);\n            setGlobal({\n              books\n            });\n            alert(res.data.message);\n          }\n        } else {\n          alert('Something went wrong, Please try again');\n        }\n      });\n    };\n\n    this.state = {\n      data: {\n        book_name: '',\n        author: ''\n      },\n      validation: {\n        book_name: '',\n        author: ''\n      },\n      loading: false\n    };\n  } //store data from input box\n\n\n  render() {\n    const {\n      book_name,\n      author\n    } = this.state.validation;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 margintop-20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card bg-light mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }\n    }, \"Enter book details\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body left-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: e => this.submitForm(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"exampleInputEmail1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 33\n      }\n    }, \"Book name\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      defaultValue: this.state.data.book_name,\n      className: \"form-control\",\n      placeholder: \"Enter book name\",\n      onChange: e => this.handleChange(e, 'book_name'),\n      onBlur: e => this.validateInput(e, 'book_name'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"small\", {\n      className: \"form-text text-muted error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 33\n      }\n    }, book_name)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"exampleInputPassword1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 33\n      }\n    }, \"Author name\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      defaultValue: this.state.data.author,\n      className: \"form-control\",\n      placeholder: \"Enter author name\",\n      onChange: e => this.handleChange(e, 'author'),\n      onBlur: e => this.validateInput(e, 'author'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"small\", {\n      className: \"form-text text-muted error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 33\n      }\n    }, author)), /*#__PURE__*/React.createElement(\"button\", {\n      disabled: this.state.loading || this.state.data.book_name === '' || this.state.data.author === '' || this.state.validation.book_name !== '' || this.state.validation.author !== '',\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 29\n      }\n    }, \"Submit\")))));\n  }\n\n}\n\nexport default AppForm;","map":{"version":3,"sources":["E:/book_shelf_application/src/components/form.js"],"names":["React","setGlobal","post","AppForm","Component","constructor","handleChange","e","name","data","state","target","value","validateInput","setState","validation","submitForm","preventDefault","loading","then","res","status","books","global","unshift","alert","message","book_name","author","render"],"mappings":"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","sourcesContent":["import React,{ setGlobal} from 'reactn';\r\nimport { post } from '../util/service';\r\nclass AppForm extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            data: {\r\n                book_name: '',\r\n                author: ''\r\n            },\r\n            validation: {\r\n                book_name: '',\r\n                author: ''\r\n            },\r\n            loading: false\r\n        }\r\n    }\r\n\r\n    //store data from input box\r\n    handleChange = (e, name) => {\r\n        let data = { ...this.state.data };\r\n        data[name] = e.target.value;\r\n        this.validateInput(e, name);\r\n        this.setState({\r\n            data\r\n        })\r\n    }\r\n\r\n    //validation input \r\n    validateInput = (e, name) => {\r\n        let validation = { ...this.state.validation };\r\n        let value = e.target.value;\r\n        switch (name) {\r\n            case 'book_name':\r\n                if (value === '') {\r\n                    validation[name] = 'Please enter book name';\r\n                }\r\n                else {\r\n                    validation[name] = '';\r\n                }\r\n                break;\r\n            case 'author':\r\n                if (value === '') {\r\n                    validation[name] = 'Please enter author name';\r\n                }\r\n                else {\r\n                    validation[name] = '';\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        this.setState({\r\n            validation\r\n        })\r\n    }\r\n\r\n    //submit the from\r\n    submitForm = (e) => {\r\n        e.preventDefault();\r\n        const data = { ...this.state.data }\r\n        this.setState({\r\n            loading: true\r\n        })\r\n        post('/books', data)\r\n            .then((res) => {\r\n                this.setState({\r\n                    loading: false\r\n                })\r\n                // console.log(res)\r\n                if (res.status === 201) {\r\n                    if (res.data.status === 'success') {\r\n                        // console.log(res.data.output)\r\n                        let books = [...this.global.books];\r\n                        books.unshift(data);\r\n                        setGlobal({\r\n                            books\r\n                        })\r\n                        alert(res.data.message)\r\n                    }\r\n                }\r\n                else {\r\n                    alert('Something went wrong, Please try again')\r\n                }\r\n            })\r\n    }\r\n\r\n    render() {\r\n        const { book_name, author } = this.state.validation;\r\n        return (\r\n            <div className=\"col-md-4 margintop-20\">\r\n                <div className=\"card bg-light mb-3\">\r\n                    <div className=\"card-header\">Enter book details</div>\r\n                    <div className=\"card-body left-text\">\r\n                        <form onSubmit={(e) => this.submitForm(e)}>\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"exampleInputEmail1\">Book name</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    defaultValue={this.state.data.book_name}\r\n                                    className=\"form-control\"\r\n                                    placeholder=\"Enter book name\"\r\n                                    onChange={(e) => this.handleChange(e, 'book_name')}\r\n                                    onBlur={(e) => this.validateInput(e, 'book_name')}\r\n                                />\r\n                                <small className=\"form-text text-muted error\">{book_name}</small>\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"exampleInputPassword1\">Author name</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    defaultValue={this.state.data.author}\r\n                                    className=\"form-control\"\r\n                                    placeholder=\"Enter author name\"\r\n                                    onChange={(e) => this.handleChange(e, 'author')}\r\n                                    onBlur={(e) => this.validateInput(e, 'author')}\r\n                                />\r\n                                <small className=\"form-text text-muted error\">{author}</small>\r\n                            </div>\r\n                            <button\r\n                                disabled={\r\n                                    this.state.loading ||\r\n                                    this.state.data.book_name === '' ||\r\n                                    this.state.data.author === '' ||\r\n\r\n                                    this.state.validation.book_name !== '' ||\r\n                                    this.state.validation.author !== ''\r\n                                }\r\n                                type=\"submit\"\r\n                                className=\"btn btn-primary\"\r\n                            >Submit</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default AppForm;\r\n"]},"metadata":{},"sourceType":"module"}