{"ast":null,"code":"import _toConsumableArray from\"E:\\\\book_shelf_application\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"E:\\\\book_shelf_application\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"E:\\\\book_shelf_application\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\book_shelf_application\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\book_shelf_application\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\book_shelf_application\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{setGlobal}from'reactn';import{post}from'../util/service';var AppForm=/*#__PURE__*/function(_React$Component){_inherits(AppForm,_React$Component);var _super=_createSuper(AppForm);function AppForm(){var _this;_classCallCheck(this,AppForm);_this=_super.call(this);_this.handleChange=function(e,name){var data=_objectSpread({},_this.state.data);data[name]=e.target.value;_this.validateInput(e,name);_this.setState({data:data});};_this.validateInput=function(e,name){var validation=_objectSpread({},_this.state.validation);var value=e.target.value;switch(name){case'book_name':if(value===''){validation[name]='Please enter book name';}else{validation[name]='';}break;case'author':if(value===''){validation[name]='Please enter author name';}else{validation[name]='';}break;default:break;}_this.setState({validation:validation});};_this.submitForm=function(e){e.preventDefault();var data=_objectSpread({},_this.state.data);_this.setState({loading:true});post('/books',data).then(function(res){_this.setState({loading:false});// console.log(res)\nif(res.status===201){if(res.data.status==='success'){// console.log(res.data.output)\nvar books=_toConsumableArray(_this.global.books);books.unshift(data);setGlobal({books:books});alert(res.data.message);}}else{alert('Something went wrong, Please try again');}});};_this.state={data:{book_name:'',author:''},validation:{book_name:'',author:''},loading:false};return _this;}//store data from input box\n_createClass(AppForm,[{key:\"render\",value:function render(){var _this2=this;var _this$state$validatio=this.state.validation,book_name=_this$state$validatio.book_name,author=_this$state$validatio.author;return/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 margintop-20\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card bg-light mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header\"},\"Enter book details\"),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body left-text\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(e){return _this2.submitForm(e);}},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"exampleInputEmail1\"},\"Book name\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",defaultValue:this.state.data.book_name,className:\"form-control\",placeholder:\"Enter book name\",onChange:function onChange(e){return _this2.handleChange(e,'book_name');},onBlur:function onBlur(e){return _this2.validateInput(e,'book_name');}}),/*#__PURE__*/React.createElement(\"small\",{className:\"form-text text-muted error\"},book_name)),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"exampleInputPassword1\"},\"Author name\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",defaultValue:this.state.data.author,className:\"form-control\",placeholder:\"Enter author name\",onChange:function onChange(e){return _this2.handleChange(e,'author');},onBlur:function onBlur(e){return _this2.validateInput(e,'author');}}),/*#__PURE__*/React.createElement(\"small\",{className:\"form-text text-muted error\"},author)),/*#__PURE__*/React.createElement(\"button\",{disabled:this.state.loading||this.state.data.book_name===''||this.state.data.author===''||this.state.validation.book_name!==''||this.state.validation.author!=='',type:\"submit\",className:\"btn btn-primary\"},\"Submit\")))));}}]);return AppForm;}(React.Component);export default AppForm;","map":{"version":3,"sources":["E:/book_shelf_application/src/components/form.js"],"names":["React","setGlobal","post","AppForm","handleChange","e","name","data","state","target","value","validateInput","setState","validation","submitForm","preventDefault","loading","then","res","status","books","global","unshift","alert","message","book_name","author","Component"],"mappings":"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","sourcesContent":["import React,{ setGlobal} from 'reactn';\r\nimport { post } from '../util/service';\r\nclass AppForm extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            data: {\r\n                book_name: '',\r\n                author: ''\r\n            },\r\n            validation: {\r\n                book_name: '',\r\n                author: ''\r\n            },\r\n            loading: false\r\n        }\r\n    }\r\n\r\n    //store data from input box\r\n    handleChange = (e, name) => {\r\n        let data = { ...this.state.data };\r\n        data[name] = e.target.value;\r\n        this.validateInput(e, name);\r\n        this.setState({\r\n            data\r\n        })\r\n    }\r\n\r\n    //validation input \r\n    validateInput = (e, name) => {\r\n        let validation = { ...this.state.validation };\r\n        let value = e.target.value;\r\n        switch (name) {\r\n            case 'book_name':\r\n                if (value === '') {\r\n                    validation[name] = 'Please enter book name';\r\n                }\r\n                else {\r\n                    validation[name] = '';\r\n                }\r\n                break;\r\n            case 'author':\r\n                if (value === '') {\r\n                    validation[name] = 'Please enter author name';\r\n                }\r\n                else {\r\n                    validation[name] = '';\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        this.setState({\r\n            validation\r\n        })\r\n    }\r\n\r\n    //submit the from\r\n    submitForm = (e) => {\r\n        e.preventDefault();\r\n        const data = { ...this.state.data }\r\n        this.setState({\r\n            loading: true\r\n        })\r\n        post('/books', data)\r\n            .then((res) => {\r\n                this.setState({\r\n                    loading: false\r\n                })\r\n                // console.log(res)\r\n                if (res.status === 201) {\r\n                    if (res.data.status === 'success') {\r\n                        // console.log(res.data.output)\r\n                        let books = [...this.global.books];\r\n                        books.unshift(data);\r\n                        setGlobal({\r\n                            books\r\n                        })\r\n                        alert(res.data.message)\r\n                    }\r\n                }\r\n                else {\r\n                    alert('Something went wrong, Please try again')\r\n                }\r\n            })\r\n    }\r\n\r\n    render() {\r\n        const { book_name, author } = this.state.validation;\r\n        return (\r\n            <div className=\"col-md-4 margintop-20\">\r\n                <div className=\"card bg-light mb-3\">\r\n                    <div className=\"card-header\">Enter book details</div>\r\n                    <div className=\"card-body left-text\">\r\n                        <form onSubmit={(e) => this.submitForm(e)}>\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"exampleInputEmail1\">Book name</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    defaultValue={this.state.data.book_name}\r\n                                    className=\"form-control\"\r\n                                    placeholder=\"Enter book name\"\r\n                                    onChange={(e) => this.handleChange(e, 'book_name')}\r\n                                    onBlur={(e) => this.validateInput(e, 'book_name')}\r\n                                />\r\n                                <small className=\"form-text text-muted error\">{book_name}</small>\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"exampleInputPassword1\">Author name</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    defaultValue={this.state.data.author}\r\n                                    className=\"form-control\"\r\n                                    placeholder=\"Enter author name\"\r\n                                    onChange={(e) => this.handleChange(e, 'author')}\r\n                                    onBlur={(e) => this.validateInput(e, 'author')}\r\n                                />\r\n                                <small className=\"form-text text-muted error\">{author}</small>\r\n                            </div>\r\n                            <button\r\n                                disabled={\r\n                                    this.state.loading ||\r\n                                    this.state.data.book_name === '' ||\r\n                                    this.state.data.author === '' ||\r\n\r\n                                    this.state.validation.book_name !== '' ||\r\n                                    this.state.validation.author !== ''\r\n                                }\r\n                                type=\"submit\"\r\n                                className=\"btn btn-primary\"\r\n                            >Submit</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default AppForm;\r\n"]},"metadata":{},"sourceType":"module"}